<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Student Progress Report - Interactive</title>
  <style>
    :root {
      --bg-page: #f0f6f9;
      --text-main: #2c3e50;
      --text-muted: #586878;

      /* Status Colors */
      --stat-i-bg: #e1f6e7; --stat-i-border: #2ecc71; --stat-i-text: #1b7a43;
      --stat-d-bg: #e3f0fc; --stat-d-border: #3498db; --stat-d-text: #205d86;
      --stat-p-bg: #fff5d9; --stat-p-border: #f1c40f; --stat-p-text: #967a0a;
      --stat-np-bg:#ebebeb; --stat-np-border:#95a5a6; --stat-np-text:#586364;

      --head-bg: #ffffff;
      --head-text: #2c3e50;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 10px 15px;
      font-family: "Quicksand", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg-page);
      color: var(--text-main);
      transition: background 0.5s;
      user-select: none; 
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden; /* Main page doesn't scroll, inner area does */
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    /* HEADER - WIDE & COMPACT */
    header {
      text-align: center;
      margin-bottom: 10px;
      display: flex;
      justify-content: center;
      flex-shrink: 0;
    }

    .title-card {
      background: linear-gradient(180deg, #eef2f6 0%, #dae1e9 100%);
      border: 2px solid white;
      border-radius: 12px;
      padding: 8px 30px;
      box-shadow: 0 0 0 2px rgba(167, 139, 250, 0.3), 0 4px 10px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 950px;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .tree-icon { width: 36px; height: 36px; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }

    .header-text-col { display: flex; flex-direction: column; align-items: flex-start; }

    .top-pill {
      background: rgba(255, 255, 255, 0.7);
      color: #475569;
      padding: 2px 8px;
      border-radius: 99px;
      font-weight: 700;
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border: 1px solid rgba(255,255,255,0.8);
      margin-bottom: 2px;
    }

    h1 { margin: 0; font-size: 20px; color: #1e293b; font-weight: 900; line-height: 1; text-transform: uppercase; }
    .header-subtext { font-size: 12px; color: #556070; font-family: "Georgia", serif; font-style: italic; }

    /* CONTROLS */
    .controls-wrapper { text-align: center; margin-bottom: 10px; flex-shrink: 0; }
    .tri-controls { display: inline-flex; gap: 5px; background: white; padding: 4px; border-radius: 50px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    .tri-btn { border: none; background: transparent; padding: 6px 16px; border-radius: 40px; font-weight: 700; color: var(--text-muted); cursor: pointer; font-size: 11px; transition: all 0.2s; }
    .tri-btn:hover { background: #f1f5f9; }
    .tri-btn.active { background: #2c3e50; color: white; box-shadow: 0 2px 6px rgba(44, 62, 80, 0.3); }

    /* STABLE STATUS BANNER */
    .status-banner {
      display: flex; border-radius: 12px; padding: 8px; justify-content: center; gap: 30px; align-items: center;
      transition: all 0.5s ease; min-height: 55px; border: 2px solid transparent; margin-bottom: 10px;
    }
    .banner-t1 { background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border-color: #93c5fd; }
    .banner-t2 { background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%); border-color: #fde047; }
    .banner-t3 { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); border-color: #86efac; }
    .banner-stat { text-align: center; animation: fadeIn 0.5s ease; }
    .bn-val { font-size: 18px; font-weight: 800; display: block; line-height: 1; }
    .bn-lbl { font-size: 10px; font-weight: 700; text-transform: uppercase; }
    .banner-t1 .bn-val { color: #1e40af; } .banner-t2 .bn-val { color: #854d0e; } .banner-t3 .bn-val { color: #15803d; }

    /* DASHBOARD */
    .dashboard-summary { display: grid; grid-template-columns: 1fr 180px 1fr; gap: 10px; align-items: stretch; margin-bottom: 10px; }
    @media (max-width: 800px) { .dashboard-summary { grid-template-columns: 1fr; } }
    .dash-card { background: white; border-radius: 12px; padding: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.06); display: flex; flex-direction: column; border: 1px solid rgba(0,0,0,0.04); min-height: 140px; }
    .dash-title { font-size: 9px; text-transform: uppercase; font-weight: 800; color: var(--text-muted); margin-bottom: 8px; text-align: center; letter-spacing: 0.5px; }

    /* GAUGE */
    .gauge-wrapper { position: relative; width: 130px; height: 65px; overflow: hidden; margin: 0 auto; }
    .gauge-arc { width: 130px; height: 130px; border-radius: 50%; transform: rotate(-90deg); }
    .gauge-inner { position: absolute; top: 28px; left: 28px; width: 74px; height: 74px; background: white; border-radius: 50%; z-index: 2; }
    .arc-label { position: absolute; top: 50%; left: 50%; transform-origin: 0 0; width: 52px; text-align: right; font-size: 9px; font-weight: 800; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.3); z-index: 1; display: flex; align-items: center; justify-content: flex-end; opacity: 0; transition: opacity 0.5s; }
    .arc-label.visible { opacity: 1; }

    /* DASHBOARD LISTS */
    .comp-list { display: flex; flex-direction: column; gap: 5px; width: 100%; }
    .comp-item { display: flex; align-items: center; gap: 8px; padding: 5px 8px; border-radius: 8px; background: #f8fafc; cursor: pointer; transition: all 0.2s; }
    .comp-item:hover { background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .ci-info { flex-grow: 1; display: flex; flex-direction: column; gap: 2px; }
    .ci-name { font-size: 11px; font-weight: 700; color: var(--text-main); line-height: 1; }
    .ci-bar-bg { width: 100%; height: 4px; background: #e2e8f0; border-radius: 2px; overflow: hidden; }
    .ci-bar-fill { height: 100%; border-radius: 2px; transition: width 0.5s; }
    .soaring .ci-bar-fill { background: var(--stat-i-border); }
    .growing .ci-bar-fill { background: var(--stat-p-border); }

    /* LEGEND Row */
    .legend-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 10px; flex-shrink: 0; }
    .legend-box { border-radius: 8px; padding: 6px; text-align: center; border-top: 3px solid; background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
    .l-title { font-weight: 800; font-size: 9px; margin-bottom: 2px; text-transform: uppercase; }
    .l-desc { font-size: 8px; line-height: 1.1; opacity: 0.8; }

    /* SCROLLABLE AREA */
    .goals-scroll-area { flex-grow: 1; overflow-y: auto; border-radius: 12px; scrollbar-width: thin; padding-right: 5px; }

    /* ACCORDIONS */
    details.subject-card { background: white; border-radius: 12px; margin-bottom: 8px; border: 1px solid rgba(0,0,0,0.05); transition: all 0.3s; }
    summary { list-style: none; padding: 10px 14px; background: #fff; cursor: pointer; display: flex; align-items: center; justify-content: space-between; border-radius: 12px; }
    summary::-webkit-details-marker { display: none; }
    .summary-left { display: flex; align-items: center; gap: 10px; }
    .summary-title { font-size: 13px; font-weight: 700; }
    .summary-right-group { display: flex; align-items: center; gap: 12px; }
    .mini-stack { width: 100px; height: 7px; background: #f1f5f9; border-radius: 4px; display: flex; overflow: hidden; }
    .ms-seg { height: 100%; transition: width 0.6s ease; }
    .ms-seg.i { background: var(--stat-i-border); } .ms-seg.d { background: var(--stat-d-border); } .ms-seg.p { background: var(--stat-p-border); } .ms-seg.np { background: #cbd5e1; }
    .accordion-icon { color: var(--text-muted); transition: transform 0.3s; display: flex; }
    details[open] .accordion-icon { transform: rotate(180deg); }

    .card-body { padding: 0 14px 14px 14px; border-top: 1px solid #f0f0f0; animation: slideDown 0.3s ease; }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; } }
    .goal-row { display: flex; gap: 10px; padding: 8px 0; border-bottom: 1px dashed #eee; align-items: flex-start; }
    .goal-row:last-child { border-bottom: none; }
    .progress-track { flex-shrink: 0; display: flex; gap: 2px; padding: 2px; background: rgba(0,0,0,0.03); border-radius: 5px; }
    .seg { width: 9px; height: 16px; border-radius: 2px; background: #e2e8f0; transition: background 0.4s; }
    .p .seg:nth-child(1) { background: var(--stat-p-border); }
    .d .seg:nth-child(1), .d .seg:nth-child(2) { background: var(--stat-d-border); }
    .i .seg:nth-child(1), .i .seg:nth-child(2), .i .seg:nth-child(3) { background: var(--stat-i-border); }
    .goal-level-label { font-size: 8px; font-weight: 800; text-transform: uppercase; padding: 2px 5px; border-radius: 3px; display: inline-block; margin-bottom: 2px; }
    .goal-text { font-size: 11px; font-weight: 600; line-height: 1.3; }
    .improved-badge { font-size: 8px; background: #dcfce7; color: #166534; padding: 1px 4px; border-radius: 3px; font-weight: 700; margin-left: 5px; }
    
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .footer { text-align: center; font-size: 9px; padding: 15px 0; color: var(--text-muted); }
  </style>
</head>
<body>

<div class="container">
  <header>
    <div class="title-card">
      <svg class="tree-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 15C50 15 65 30 65 45C65 55 60 60 50 60C40 60 35 55 35 45C35 30 50 15 50 15Z" fill="#86efac"/>
        <path d="M50 5C50 5 70 25 70 45C70 60 60 70 50 70C40 70 30 60 30 45C30 25 50 5 50 5Z" fill="#4ade80" fill-opacity="0.6"/>
        <rect x="45" y="70" width="10" height="25" rx="2" fill="#8d6e63"/>
        <path d="M50 70C50 70 35 60 30 45C25 30 35 15 50 10" stroke="#166534" stroke-width="2" stroke-opacity="0.1"/>
      </svg>
      <div class="header-text-col">
        <h1>GROWING INDEPENDENCE</h1>
        <div class="header-subtext">Rooted in Strength, Reaching for the Sky</div>
        <div class="top-pill">Student Progress Report ‚Ä¢ Grade 3</div>
      </div>
    </div>
  </header>

  <div class="controls-wrapper">
    <div class="tri-controls">
      <button class="tri-btn active" id="btn-1" onclick="updateView(1)">Tri 1</button>
      <button class="tri-btn" id="btn-2" onclick="updateView(2)">Tri 2</button>
      <button class="tri-btn" id="btn-3" onclick="updateView(3)">Tri 3</button>
    </div>
  </div>

  <div class="dashboard-container">
    <div class="status-banner" id="status-banner"></div>
    <div class="dashboard-summary">
      <div class="dash-card growing">
        <div class="dash-title" style="color:var(--stat-p-text)">PRACTICING</div>
        <div class="comp-list" id="list-growing"></div>
      </div>
      <div class="dash-card center-card">
        <div class="dash-title" id="dash-tri-label">Distribution</div>
        <div class="gauge-wrapper">
          <div class="gauge-arc" id="gauge-arc"></div>
          <div class="arc-label" id="lbl-np">NP</div>
          <div class="arc-label" id="lbl-p">P</div>
          <div class="arc-label" id="lbl-d">D</div>
          <div class="arc-label" id="lbl-i">I</div>
          <div class="gauge-inner"></div>
        </div>
        <div class="gauge-label">
          <span style="color:#cbd5e1">‚óè</span> NP <span style="color:#fde047">‚óè</span> P <span style="color:#93c5fd">‚óè</span> D <span style="color:#86efac">‚óè</span> I
        </div>
      </div>
      <div class="dash-card soaring">
        <div class="dash-title" style="color:var(--stat-i-text)">INDEPENDENTLY APPLYING</div>
        <div class="comp-list" id="list-soaring"></div>
      </div>
    </div>
  </div>

  <div class="legend-row">
    <div class="legend-box np" style="border-color:var(--stat-np-border)">
      <div class="l-title">Not Presented</div>
      <div class="l-desc">Not yet introduced.</div>
    </div>
    <div class="legend-box p" style="border-color:var(--stat-p-border)">
      <div class="l-title">Practicing</div>
      <div class="l-desc">1/3 Independence.</div>
    </div>
    <div class="legend-box d" style="border-color:var(--stat-d-border)">
      <div class="l-title">Demonstrating</div>
      <div class="l-desc">2/3 Independence.</div>
    </div>
    <div class="legend-box i" style="border-color:var(--stat-i-border)">
      <div class="l-title">Independent</div>
      <div class="l-desc">Full Independence.</div>
    </div>
  </div>

  <div class="goals-scroll-area">
    <div id="accordionsTarget"></div>
    <div class="footer">Data represents teacher observations for 2025‚Äì2026 school year.</div>
  </div>
</div>

<script>
  const goals = [
    {subject:"Mathematics", goal:"Base-ten: break up 3-digit numbers into hundreds/tens/ones", tri1:"D", tri2:"D", tri3:"I"},
    {subject:"Mathematics", goal:"Read, write, and compare numbers up to 100", tri1:"D", tri2:"I", tri3:"I"},
    {subject:"Mathematics", goal:"Use strategies to practice addition/subtraction fact fluency", tri1:"I", tri2:"I", tri3:"I"},
    {subject:"Mathematics", goal:"Follow guided steps to add/subtract within 100", tri1:"NP", tri2:"P", tri3:"D"},
    {subject:"Mathematics", goal:"Solve single-step add/subtract word problems", tri1:"P", tri2:"D", tri3:"I"},
    {subject:"English Language Arts", goal:"Copy lowercase/uppercase print letters legibly", tri1:"P", tri2:"P", tri3:"D"},
    {subject:"English Language Arts", goal:"Identify/define basic parts of speech", tri1:"D", tri2:"D", tri3:"I"},
    {subject:"English Language Arts", goal:"Write 1 sentence with prompt + template", tri1:"P", tri2:"D", tri3:"D"},
    {subject:"English Language Arts", goal:"Produce a variety of sentence types", tri1:"NP", tri2:"P", tri3:"D"},
    {subject:"English Language Arts", goal:"Apply capitalization/punctuation rules", tri1:"P", tri2:"D", tri3:"D"},
    {subject:"Science/SS Study Skills", goal:"Collaboratively identify essential vocabulary", tri1:"I", tri2:"I", tri3:"I"},
    {subject:"Science/SS Study Skills", goal:"Develop typing skills (letters and short words)", tri1:"I", tri2:"I", tri3:"I"},
    {subject:"Science/SS Study Skills", goal:"Teacher-guided note-taking process", tri1:"P", tri2:"D", tri3:"D"},
    {subject:"E.C.O.", goal:"Recognize/identify a range of human emotions", tri1:"I", tri2:"I", tri3:"I"},
    {subject:"E.C.O.", goal:"Explain the concept of a growth mindset", tri1:"D", tri2:"I", tri3:"I"},
    {subject:"E.C.O.", goal:"Keep school materials intact and organized", tri1:"D", tri2:"D", tri3:"I"},
    {subject:"Active Learning", goal:"Positively communicate and collaborate with teammates", tri1:"I", tri2:"I", tri3:"I"},
    {subject:"Active Learning", goal:"Exhibit safe and responsible behavior", tri1:"I", tri2:"I", tri3:"I"}
  ];

  const STATUS_CONFIG = {
    "I": { class: "i", label: "Blooming", score: 3 },
    "D": { class: "d", label: "Demonstrating", score: 2 },
    "P": { class: "p", label: "Practicing", score: 1 },
    "NP": { class: "np", label: "Not Presented", score: 0 }
  };

  const SUBJECT_CONFIG = {
    "Mathematics": { icon: "üßÆ" }, "English Language Arts": { icon: "üìñ" },
    "Science/SS Study Skills": { icon: "üåç" }, "E.C.O.": { icon: "üå±" },
    "Active Learning": { icon: "‚öΩ" }
  };

  let currentTri = 1;
  let isInitialized = false;

  function updateView(t) {
    currentTri = t;
    document.querySelectorAll('.tri-btn').forEach((btn, idx) => { btn.classList.toggle('active', (idx + 1) === t); });
    renderReport();
  }

  document.addEventListener('keydown', (e) => {
    if(e.key === "ArrowRight") updateView(currentTri >= 3 ? 1 : currentTri + 1);
    if(e.key === "ArrowLeft") updateView(currentTri <= 1 ? 3 : currentTri - 1);
  });

  function renderReport() {
    const grouped = {};
    let totalNP=0, totalP=0, totalD=0, totalI=0, improved=0, mastered=0;
    goals.forEach((g, idx) => {
      g.id = idx;
      if(!grouped[g.subject]) grouped[g.subject] = { items: [] };
      grouped[g.subject].items.push(g);
      const val = g[`tri${currentTri}`];
      if(val==="I") { totalI++; mastered++; } else if(val==="D") totalD++; else if(val==="P") totalP++; else totalNP++;
      if(currentTri > 1 && STATUS_CONFIG[val].score > STATUS_CONFIG[g.tri1].score) improved++;
    });

    const total = goals.length;
    const banner = document.getElementById("status-banner");
    banner.className = `status-banner banner-t${currentTri}`;
    if(currentTri === 1) banner.innerHTML = `<div class="banner-stat"><span class="bn-val">üèÅ</span><span class="bn-lbl">Baseline</span></div><div class="banner-stat"><span class="bn-val">${total}</span><span class="bn-lbl">Total Goals</span></div>`;
    else if(currentTri === 2) banner.innerHTML = `<div class="banner-stat"><span class="bn-val">üìà</span><span class="bn-lbl">Progress</span></div><div class="banner-stat"><span class="bn-val">+${improved}</span><span class="bn-lbl">Improvements</span></div>`;
    else banner.innerHTML = `<div class="banner-stat"><span class="bn-val">üéâ</span><span class="bn-lbl">Year End</span></div><div class="banner-stat"><span class="bn-val">${mastered}</span><span class="bn-lbl">Mastered</span></div><div class="banner-stat"><span class="bn-val">+${improved}</span><span class="bn-lbl">Growth</span></div>`;

    const arc = document.getElementById("gauge-arc");
    const dNP = (totalNP/total)*180, dP = (totalP/total)*180, dD = (totalD/total)*180;
    arc.style.background = `conic-gradient(var(--stat-np-border) 0 ${dNP}deg, var(--stat-p-border) ${dNP}deg ${dNP+dP}deg, var(--stat-d-border) ${dNP+dP}deg ${dNP+dP+dD}deg, var(--stat-i-border) ${dNP+dP+dD}deg 180deg, transparent 180deg)`;

    const setL = (id, deg, show) => { const el = document.getElementById(id); el.classList.toggle('visible', show); if(show) el.style.transform = `rotate(${deg}deg) translateX(52px) rotate(${-deg}deg)`; };
    setL('lbl-np', -90 + dNP/2, dNP > 10); setL('lbl-p', -90 + dNP + dP/2, dP > 10); setL('lbl-d', -90 + dNP + dP + dD/2, dD > 10); setL('lbl-i', -90 + dNP + dP + dD + (180-(dNP+dP+dD))/2, (180-(dNP+dP+dD)) > 10);

    const subjects = Object.keys(grouped).map((s, i) => {
      const items = grouped[s].items;
      let score = 0; items.forEach(g => score += STATUS_CONFIG[g[`tri${currentTri}`]].score);
      return { name: s, score, icon: SUBJECT_CONFIG[s].icon, pct: Math.round((items.filter(g => g[`tri${currentTri}`] === "I" || g[`tri${currentTri}`] === "D").length / items.length) * 100), id: i };
    });

    const sortS = [...subjects].sort((a,b) => b.score - a.score);
    document.getElementById("list-soaring").innerHTML = sortS.slice(0, 3).map(s => `<div class="comp-item"><span class="ci-name">${s.icon} ${s.name}</span><div class="ci-info"><div class="ci-bar-bg"><div class="ci-bar-fill" style="width:${s.pct}%"></div></div></div></div>`).join("");
    document.getElementById("list-growing").innerHTML = sortS.slice(-3).reverse().map(s => `<div class="comp-item"><span class="ci-name">${s.icon} ${s.name}</span><div class="ci-info"><div class="ci-bar-bg"><div class="ci-bar-fill" style="width:${s.pct}%"></div></div></div></div>`).join("");

    if(!isInitialized) {
      let html = "";
      Object.keys(grouped).forEach((s, idx) => {
        const items = grouped[s].items;
        let rows = items.map(g => `<div class="goal-row"><div class="progress-track" id="tr-${g.id}"><div class="seg"></div><div class="seg"></div><div class="seg"></div></div><div class="goal-content"><div class="goal-level-label" id="lb-${g.id}"></div><div class="goal-text">${g.goal}</div></div></div>`).join("");
        html += `<details class="subject-card"><summary><div class="summary-left"><span>${SUBJECT_CONFIG[s].icon}</span><span class="summary-title">${s}</span></div><div class="summary-right-group"><div class="mini-stack" id="ms-${idx}"><div class="ms-seg np"></div><div class="ms-seg p"></div><div class="ms-seg d"></div><div class="ms-seg i"></div></div><div class="accordion-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></div></div></summary><div class="card-body">${rows}</div></details>`;
      });
      document.getElementById("accordionsTarget").innerHTML = html;
      isInitialized = true;
    }

    Object.keys(grouped).forEach((s, idx) => {
      const items = grouped[s].items;
      let cNP=0, cP=0, cD=0, cI=0;
      items.forEach(g => {
        const v = g[`tri${currentTri}`], st = STATUS_CONFIG[v];
        if(v==="I") cI++; else if(v==="D") cD++; else if(v==="P") cP++; else cNP++;
        document.getElementById(`tr-${g.id}`).className = `progress-track ${st.class}`;
        const lab = document.getElementById(`lb-${g.id}`);
        lab.className = `goal-level-label l-${st.class}`;
        lab.innerHTML = st.label + (currentTri > 1 && st.score > STATUS_CONFIG[g.tri1].score ? `<span class="improved-badge">UP ‚Üó</span>` : "");
      });
      const ms = document.getElementById(`ms-${idx}`);
      ms.querySelector('.np').style.width = (cNP/items.length)*100 + "%";
      ms.querySelector('.p').style.width = (cP/items.length)*100 + "%";
      ms.querySelector('.d').style.width = (cD/items.length)*100 + "%";
      ms.querySelector('.i').style.width = (cI/items.length)*100 + "%";
    });
  }
  updateView(1);
</script>
</body>
</html>
